<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>websocket-java-socket-io</title>
    <script src="./engine.io-4.0.3.js"></script>
</head>
<body>
<div id="sign">init</div>
<pre id="content"></pre>
</body>

<script type="text/javascript">
    const opt = {
        // transports: ['polling']
        // transports: ['websocket']
    }
    const socket = eio('http://localhost:8080', opt);
    socket.on('open', () => {
        console.log('open');
        socket.on('message', (data) => {
            console.log(data);
        });
        for (let i = 0; i < 5000; i++) {
            socket.send('vv' + i);
        }
        socket.on('close', () => {
            console.log('close');
        });
    });

    function send() {
        socket.send('vv');
    }
</script>
</html>
